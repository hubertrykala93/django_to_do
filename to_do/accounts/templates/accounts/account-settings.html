{% extends 'core/base.html' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}


<div class="side-content tabs-wrapper user-settings">

    <aside>

        <div class="user-avatar">
            <img src="{{ user.image.url }}" alt="user avatar">
        </div>

        <h4 class="sidebar-title user-name">
            {% if user.first_name %}
            {{ user.first_name }}
            {% else %}
            {{ user.username }}
            {% endif %}
        </h4>

        {% if user.is_authenticated %}
        <div class="last-seen">
            Last seen:
            <span>
                    {{ user.last_login }}
            </span>
        </div>
        {% endif %}

        <ul class="tabs-nav">
            <li>
                <i class="ri-settings-2-line"></i>
                Account
            </li>

            <li>
                <i class="ri-lock-password-line"></i>
                Password
            </li>

            <li>
                <i class="ri-image-line"></i>
                Avatar
            </li>

            <li>
                <i class="ri-information-line"></i>
                Informations
            </li>
        </ul>
    </aside>

    <div class="side-content-body tabs-contents">
        <div class="tab-content">
            <form method="post" action="">
                {% csrf_token %}

                <div class="form-row">
                    <div class="input-wrapper">
                        <label>{{ form_1.username.label }}</label>
                        {{ form_1.username }}
                        {% if form_1.username.errors %}
                        <ul class="errorlist">
                            {% for error in form_1.username.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>

                <div class="form-row">
                    <div class="input-wrapper">
                        <label>{{ form_1.email.label }}</label>
                        {{ form_1.email }}
                        {% if form_1.email.errors %}
                        <ul class="errorlist">
                            {% for error in form_1.email.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>

                <div class="submit-row">
                    <button class="btn" name="{{ form_1.prefix }}" type="submit">
                        <i class="ri-loop-left-line"></i>
                        Update
                    </button>
                </div>

            </form>
        </div>

        <div class="tab-content">
            <form method="post" action="">
                {% csrf_token %}

                <div class="form-row">
                    <div class="input-wrapper">
                        <label>{{ form_2.new_password1.label }}</label>
                        {{ form_2.new_password1 }}
                        {% if form_2.new_password1.errors %}
                        <ul class="errorlist">
                            {% for error in form_2.new_password1.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>

                <div class="form-row">
                    <div class="input-wrapper">
                        <label>{{ form_2.new_password2.label }}</label>
                        {{ form_2.new_password2 }}
                        {% if form_2.new_password2.errors %}
                        <ul class="errorlist">
                            {% for error in form_2.new_password2.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>

                <div class="submit-row">
                    <button class="btn" name="{{ form_2.prefix }}" type="submit">
                        <i class="ri-loop-left-line"></i>
                        Update
                    </button>
                </div>

            </form>
        </div>

        <div class="tab-content">
            <form method="post" enctype="multipart/form-data" action="">
                {% csrf_token %}

                <div class="form-row">
                    <div class="input-wrapper">
                        {{ form_3.image }}
                        {% if form_3.image.errors %}
                        <ul class="errorlist">
                            {% for error in form_3.image.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>

                <div class="submit-row">
                    <button class="btn" name="{{ form_3.prefix }}" type="submit">
                        <i class="ri-loop-left-line"></i>
                        Update
                    </button>
                </div>

            </form>
        </div>

        <div class="tab-content">
            <form method="post" action="">
                {% csrf_token %}

                <div class="form-row">
                    <div class="input-wrapper">
                        <label>{{ form_4.first_name.label }}</label>
                        {{ form_4.first_name }}
                        {% if form_4.first_name.errors %}
                        <ul class="errorlist">
                            {% for error in form_4.first_name.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>

                <div class="form-row">
                    <div class="input-wrapper">
                        <label>{{ form_4.last_name.label }}</label>
                        {{ form_4.last_name }}
                        {% if form_4.last_name.errors %}
                        <ul class="errorlist">
                            {% for error in form_4.last_name.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>

                <div class="form-row">
                    <div class="input-wrapper">
                        <label>{{ form_4.gender.label }}</label>
                        {{ form_4.gender }}
                        {% if form_4.gender.errors %}
                        <ul class="errorlist">
                            {% for error in form_4.gender.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>

                <div class="form-row">
                    <div class="input-wrapper">
                        <label>{{ form_4.date_of_birth.label }}</label>
                        {{ form_4.date_of_birth }}
                        {% if form_4.date_of_birth.errors %}
                        <ul class="errorlist">
                            {% for error in form_4.date_of_birth.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>

                <div class="form-row">
                    <div class="input-wrapper">
                        <label>{{ form_4.country.label }}</label>
                        {{ form_4.country }}
                        {% if form_4.country.errors %}
                        <ul class="errorlist">
                            {% for error in form_4.country.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>

                <div class="form-row">
                    <div class="input-wrapper">
                        <label>{{ form_4.province.label }}</label>
                        {{ form_4.province }}
                        {% if form_4.province.errors %}
                        <ul class="errorlist">
                            {% for error in form_4.province.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>

                <div class="form-row">
                    <div class="input-wrapper">
                        <label>{{ form_4.city.label }}</label>
                        {{ form_4.city }}
                        {% if form_4.city.errors %}
                        <ul class="errorlist">
                            {% for error in form_4.city.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>

                <div class="submit-row">
                    <button class="btn" name="{{ form_4.prefix }}" type="submit">
                        <i class="ri-loop-left-line"></i>
                        Update
                    </button>
                </div>

            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block page_scripts %}
<script>
    /**
      * TABS LOGIC
        */

    //tabs navigation
    const tabsWrapper = document.querySelector('.tabs-wrapper')
    const tabsNavItems = tabsWrapper.querySelectorAll('.tabs-nav li')
    const tabsContentItems = tabsWrapper.querySelectorAll('.tabs-contents .tab-content')

    tabsContentItems[0].classList.add('active')
    tabsNavItems[0].classList.add('active')

    tabsNavItems.forEach((item, index) => {
        item.addEventListener('click', () => {
            tabsContentItems.forEach((content) => {content.classList.remove('active')})
            tabsContentItems[index].classList.add('active')

            tabsNavItems.forEach(item =>{item.classList.remove('active')})
            tabsNavItems[index].classList.add('active')
        })
    })
</script>
{% endblock %}